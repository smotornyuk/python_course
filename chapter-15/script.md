# Лекция 15

(Говорящая голова)

Привет. Если бы это слушаете, значит вы сумели преодолеть немало
сложностей и теперь вы действительно готовы к тому чтобы научиться
писать в веб-сайты. Последний наш модуль будет целиком и полностью
посвящен весьма известному и достаточно популярному фреймворкy Django.
Сразу пошли неизвестные термины. Есть ли в будущем будете слышать слово
фреймворк, то знайте, что оно подразумевает библиотеку, которая
определяет некий объём функционала для выполнения конкретных
задач. Например, в Django определено множество функций и классов для
работы с базами данных и web-страницами. Фреймворк предлагает свои
решения и пропагандирует использование своей стилистики и структуры
создания кода. Во многих случаях вы можете игнорировать стандарты
фреймворка, но если вы будете им следовать, то разработка приложения
станет гораздо проще. Потому изучение любого фреймворка можно
разделить на две части - изучение его функционала и изучение его
стандартов. Ни в коем случае не пренебрегайте вторым.

Для того чтобы работать с Django, нам нужно его установить. Для этого
вам понадобится интернет-соединение. Кроме того нам не мешает
выполнить некий подготовительный процесс, хоть он вовсе не
обязательный. Представьте что вы работаете на реальных
проектах. Вероятнее всего, в течение недели вам приходится работать
один день на одном проекте, два дня на другом, 4 часа на третьем. И,
так как жизнь весьма несправедливая штука, каждый из этих проектов
будет использовать множество дополнительных библиотек. Некоторые
библиотеки будут совпадать в разных проектах. Возможно все три проекта
будут написаны на Django. Но вернемся к несправедливости жизни. Каждый
из проектов будет использовать свою версию Django, обязательно
несовместимую с другими. Таким образом вам нужно как-то поставить 3
разных версий одной и тоже библиотеки на свой компьютер и быстрым
способом между ними переключаться. Вот как раз для этого нам придётся
произвести подготовительные действия. Если вы планируете работать над
одним единственным проектом всю свою жизнь, то этот процесс можно
пропустить. Перемещаемся в консоль

(видео конспект)

https://drive.google.com/open?id=1yiO4QO6WI3Ev8Jqpal4W1oPXbjWgPlpk Виртуальное окружение

----------------------------------------------------------------

(Говорящая голова)

Теперь уже можно начинать писать свой проект. Вспомните что я говорил
недавно про структуру проекта — каждый фреймворка предполагает свои
правила, стандарты и структурy.  Поэтому вам нужно хорошенько изучить
Django чтобы правильно разместить все свои папки и файлы. Вам нужно
создать файлы конфигурации которые скажут Django, как именно нужно
работать; создать файл который будет связывать код на питоне с
браузером и выполните ещё много скучных и сложных задач. Если бы всё
было действительно так сложно, то никто не стал бы пользоваться
Django. Насколько я могу судить из своего опыта, если какой-либо
фреймворк предполагает написание больше 10 строк для создания
простейшего проекта на нём, то вы наверняка можете найти где-то в
интернете библиотеку, которая генерирует все необходимые файлы
автоматически. В нашем случае это библиотека уже встроена внутрь
нашего фреймворка. Вам нужно просто запустить скрипт, который настроит
для нас простейший проект.

(видео конспект)

https://drive.google.com/open?id=1q-8teV2vn7H2A34UEArb0W_ivO_dPEqq Запуск сервера

----------------------------------------------------------------

(Говорящая голова)

Самой основополагающей частью в вашем сайте пока что являются
адреса. Нам нужно как-то уточнить по какому адресу переходить можно и
что там будет отображаться. Есть не пытаться генерировать динамический
контент и ограничиться простейшими адресами, данная задача становится
крайне простой — нам просто нужно немного подправить один из уже
существующих файлов в Django.  Пока что мы не будем пытаться
генерировать какие-нибудь изощренные страницы с красивой разметкой и
стилями, а всего лишь попытаемся вывести приветствие в
браузере. Возвращаемся к коду

(видео конспект)


https://drive.google.com/open?id=1Ng7PKluwqwn9lnaFPbZPUow6D2Ow5St7 Роутинг

----------------------------------------------------------------

(Говорящая голова)

Страниц на вашем сайте будет невероятно много — поверьте на слово, а
потому хранить весь код в одном файле — это крайне неразумное
решение. Код стоит разбивать на отдельные фрагменты - благо мы умеем
импортировать библиотеки. И в Django есть своя система структуризации
кода. В идеале вы должны разбивать код на модули. Каждый модуль это
папка, содержащая набор из нескольких возможных файлов. Модуль должен
полностью описывать отдельную секцию сайта. Например, модуль блога
должен описывать как создаются новые записи, как они комментируется и
как они отображаются на странице. Модуль календаря должен уметь
отображать расписание, и позволять на это расписание
модифицировать. Встроенный модуль администраторa Django контролирует
доступ в секцию администрации сайта и позволяет управлять другими
пользователями. Потому вам стоит сразу планировать свой сайт модульным
образом, так чтобы любую функцию можно было всегда отключить не сломав
приложения в целом. Начинаем создавать правильную структуру

(видео конспект)


https://drive.google.com/open?id=1jBC44z3lui-1lME1cp2v6D2TFS7S-Q4- Разделение путей

----------------------------------------------------------------

(Говорящая голова)

Вы заметили, что внутри нашего модуля было очень много
файлов. Некоторые из них можно даже удалить — Django создает эти файлы
просто потому что они часто нужны. И можно заметить, что файла с
адресами по умолчанию не было — это означает лишь то, что большинство
моделей никаких новых адресов на ваш сайт не добавит. Если вы
посмотрите на секцию настроек в которой упоминаются включенные
приложения, вы обязательно заметите что включено около 6 плагинов, но
в главном файле конфигурации адресов мы видим только подключение
админки. Таким образом, среди встроенных плагинов только один из шести
добавляет адреса. В ваших проектах вы обязательно будете создавать
хотя бы один свой модуль, который также регистрируют новые пути на
вашем сайте. Кроме него количество плагинов может исчисляться
десятками, но задача всех остальных будут скорее служебной. Так что
давайте сделаем быстрый обзор имеющихся на данный момент файлов и их
основных задач

(видео конспект)


https://drive.google.com/open?id=1bTF4akZ5neWRtSziVf3ifrALA3WBHpff Структура модуля

----------------------------------------------------------------

(Говорящая голова)

И сейчас мы столкнулись с неприятной задачей - нам пришлось писать
HTML разметку внутри строк питона. Это очень неудобно, особенно если
ваш редактор не включает в подобных ситуациях подсветку синтаксиса и
автодополнение. Поэтому очень хотелось бы писать разметку в обычных
HTML файлах и как-то убеждать в ваш фреймворк находить их и
подключать. Но на то Django и фреймворк, что в нём есть всё
необходимое для выполнения ваших желаний. Для упрощения своей жизни вы
должны знать несколько соглашений. Во-первых, все шаблоны, то есть
HTML файлы вашего модуля должны находиться внутри папки templates,
которая в свою очередь находится в корне вашего модуля. Внутри этой
папки должно быть поддиректория, чьe название совпадает с названием
вашего модуля. Это звучит немного запутано но сейчас вы увидите на
практике выполнение этого правила. Если вы соблюдаете все стандарты,
то Django подготовил для вас пару служебных функций.

(видео конспект)


https://drive.google.com/open?id=1EWJMrWiC9KLYctWqQ4ppTuO8P9O59wHJ Шаблоны

----------------------------------------------------------------

(Говорящая голова)

Думал вы уже успели заметить общую стилистику — мы отказываемся от
написания множествa повторяющихся строк кода в пользу существующих
функций. Если что-то нельзя сделать с помощью существующих функций, мы
это генерируем с помощью команды в консоли. Если что-то нельзя
сгенерировать команды в консоли, то вероятнее всего вы просто не
знаете функцию которая выполнит требования. Любая задача должна
решаться просто. Не в плане простого название функции а в том смысле,
что вам не нужно писать много кода для решения стандартных
задач. Например, нам не нужно прописывать весь HTML шаблон прямо в
коде Django, если мы хотим отобразить страницу. Мы можем этот шаблон
прописать отдельно, а потом подключить с помощью 3 строк в функции,
ответственной за генерацию контента. Но мы увидели, что эти три строки
повторяются в двух наших функциях, и подобная ситуация должна
натолкнуть вас на мысль что есть способ сделать всё это гораздо
проще. В любой ситуации где у вас есть повторение кода, можно
использовать функцию и вполне вероятно, что эта функция уже
определена. Возвращаемся в редактор

(видео конспект)


https://drive.google.com/open?id=1Aa0h2YPwACC8Nl2oA8Tp0yQxSCh2sX6l Статические файлы

----------------------------------------------------------------

(Говорящая голова)

И раз я уже загорел про динамику, нужно обязательно попробовать
сгенерировать страницу с помощью чего-то более интересного. В
действительности, в Django прописана огромная библиотека для работы с
версткой. Основная задача — добавить в верстку немного
программирования и сделать ее более динамичной. Например, зачем
прописывать список элементов вручную, если их можно сгенерировать в
цикле. HTML не поддерживает циклов, но вот с помощью Django они могут
появиться. Более подробную генерацию и большую часть возможности мы
рассмотрим на следующей встрече, но даже сегодня мы вполне можем
затронуть две наиболее полезные детали.

(видео конспект)

https://drive.google.com/open?id=1XQm5aIMwPIOMPTcqskZ7NEHkiGi7S_yP Подключение шаблонов

----------------------------------------------------------------

(Говорящая голова)

И ещё одна особенность динамической генерации шаблонов, которая чуть
более сложная, но и чуть более гибкая — наследование шаблонов. Звучит
как наследование в объектно-ориентированном программировании, что, в
принципе, недалеко от истины. Вместо того чтобы создавать шаблоны с
помощью композиции, в каждом файле указывая, что нужно подключить для
генерации полной страницы, вы можете определить основной шаблон
который поверхностно описывает всё, затем наследоваться от него и
определить более детализированый шаблон секции сайта. В конце концов,
вы наследующете от детализированного шаблона и определяете до
последней мелочи структуру конечной страницы. Вот так в три этапа вы
можете описать любую страницу. И вот как она выглядит на практике

(видео конспект)



https://drive.google.com/open?id=1cHTpMimOG2aX4LZQfs1VI6-JURkPseJ0 Наследование шаблонов


----------------------------------------------------------------

(Говорящая голова)


Вот такой вот он Django — непростой и несложный. Если вы знакомы с
правилами того, как нужно оформлять свой код — вы с легкостью
выполнить любую задачу В Django. Если вы запомните много функций и
классов, вам тоже будет не очень сложно.  Если у вас плохая память и
вам лень читать документацию — могу вам только посочувствовать. Но не
забывайте, что этот фреймворк полностью написан на питоне, а значит
его могли бы написать в принципе и вы. В нём нет никакой магии, просто
большой объем кода, старающегося предусмотреть все возможные
задачи. Разумеется это невозможно, потому и существует множество
расширений и плагинов. Каждый раз, когда у вас возникает задача
нереализуемая встроенными средствами, попытайтесь сначала поискать
готовые решения — их невероятно много и наверняка вы найдете то, что
вам нужно. И только после этого начинайте писать свой код. Нередко
случалось что для выполнения проекта, мне приходилось находить и
настраивать десятки библиотек, и писать всего пару десятков строк
кода. Да конечно, это только если не считать верстку — каждый проект
имеет уникальный дизайн поэтому с ней всегда полно проблем. Но и там
при желании можно найти кучу решений, которые сильно облегчат вам
жизнь. Так что никогда не бойтесь искать. У меня уже настал поздний
вечер, поэтому мне пора с вами прощаться и придумать себе какое-нибудь
развлечение. Не скучайте, вам я тоже развлечение придумал, так что
вперёд к подвигам и секции домашнего задания.